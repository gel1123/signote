## テキスト処理系コマンドをまとめてみる

### catコマンド
"concat"の意味。テキストファイルを結合して出力します。

ただし名前通りの使われ方より、とくに結合することなく、単一のファイルを読み出すために使われるケースが多い。

### nlコマンド
"number-lines"の意味。テキストファイルに行番号を付けて表示します。

オプションごとに異なる形式で行番号を付けることができます。

|オプション|意味|
|----------|----|
|-b|本文に以下オプションで指定した形式に従い行番号を付与する|


|形式|意味|
|----|----|
|a|すべての行に行番号を表示する形式|
|t|空白行を除いて行番号を表示する形式|
|n|行番号を付与しない形式|

また、上記のほかに基本正規表現に合致する行のみを番号付けする「pBRE」という形式もあります。
【p"基本正規表現"】で任意のパターンを指定できます。

```bash
# 例：アルファベットで始まる行のみ番号付けする
nl file -b p"^[a-zA-Z]"
```

ただしここで使える「基本正規表現」とは、現在のプログラミング言語で広く使われている「拡張正規表現」とは異なります。使える文法に制限があるので気を付けてください。

# odコマンド
"octal-dump"の略。ファイルの内容を8進数（octal）で出力するコマンド。-tオプションで指定すれば、8進数以外の形式での出力も可能です。

|形式|意味|
|----|----|
|o|8進数。デフォルト設定|
|x|16進数。hexadecimalの略|
|c|ASCII文字。charの略|

```bash
# 例："echo hoge"の出力を16進数に変換する
echo hoge | od -t x

# 実行結果：
# 0000000 65676f68 0000000a
# 0000005
```

## cutコマンド
ファイルを読み込んで、1行ごとに指定した箇所を切り出して出力するコマンド。

|オプション|意味|
|----------|----|
|-b|切り出す範囲をバイト数で指定|
|-c|切り出す範囲を文字数で指定|
|-d|区切り文字（delimiter）を指定<br>※以下の-fオプションと併用する）|
|-f|切り出すセクション番号を指定<br>※セクション番号：-dオプションで指定した文字で区切られた範囲に、行頭から1, 2, 3...と割り振られた番号のこと|

```bash
# 例：コロンで区切った文字列のうち、最初と最後のセクションのみを出力
cat <<EOF | cut -d : -f 1,3
id:name:value
01:sig:111
02:gel:222
03:root:333
EOF

# 実行結果：
# id:value
# 01:111
# 02:222
# 03:333
```

## sortコマンド
ファイルから読み込まれた文書を並べ替えて標準出力するコマンドです。デフォルトでは昇順ソートを行いますが、以下オプションで挙動を変えることができます。

|オプション|意味|
|----------|----|
|-b<br>--ignore-leading-blanks|行頭の空白文字を無視してソートする|
|-f<br>--ignore-case|アルファベットの大文字・小文字を同じとみなしてソートする<br>（"-f" は"fold lower case to upper case"の略）|
|-r<br>--reverse|降順でソートする|
|-n<br>--numeric-sort|数字を文字列ではなく数値としてソートする|

```bash
# 例１：1〜20までの数字を文字列としてソートする
seq 20 | sort

# 実行結果：
# 1
# 10
# 11
# 12
# 13
# 14
# 15
# 16
# 17
# 18
# 19
# 2
# 20
# 3
# 4
# 5
# 6
# 7
# 8
# 9


# 例２：1〜20までの数字を数値としてソートする
seq 20 | sort -n

# 実行結果

# 1
# 2
# 3
# 4
# 5
# 6
# 7
# 8
# 9
# 10
# 11
# 12
# 13
# 14
# 15
# 16
# 17
# 18
# 19
# 20
```

## joinコマンド
複数のファイルを「-j」オプションで指定したフィールド同士で結合します。

```bash
# joinしたいファイルその1
cat 001.txt

# aa class-a A
# ab class-b B
# ac class-c C
# ad class-d D
# ae class-e E
# af class-f F
# ag class-g G
# ah class-h H
# ai class-i I
# aj class-j J

# joinしたいファイルその2
cat 002.txt

# 01 value-a A
# 02 value-b B
# 03 value-c C
# 04 value-d D
# 05 value-e E
# 06 value-f F
# 07 value-g G
# 08 value-h H
# 09 value-i I
# 10 value-j J


# 001.txt と 002.txt を「3つ目のフィールド同士で」結合する
join -j 3 001.txt 002.txt

# 実行結果：
# A aa class-a 01 value-a
# B ab class-b 02 value-b
# C ac class-c 03 value-c
# D ad class-d 04 value-d
# E ae class-e 05 value-e
# F af class-f 06 value-f
# G ag class-g 07 value-g
# H ah class-h 08 value-h
# I ai class-i 09 value-i
# J aj class-j 10 value-j

```

また「-1」「-2」オプションを使って、ファイルごとに異なる列のフィールド同士で結合することも可能です。

```bash
cat 003.txt
# 実行結果：
# user1 001 S
# user2 002 S
# user3 003 A

cat 004.txt
# 実行結果：
# id001 user1
# id002 user2
# id003 user3


# 「-1」オプションでひとつ目のファイルの結合フィールドを指定する
# 「-2」オプションでふたつ目のファイルの結合フィールドを指定する
join -1 1 -2 2 003.txt 004.txt

# 実行結果：
user1 001 S id001
user2 002 S id002
user3 003 A id003
```

なお、joinコマンドはファイル間で結合するフィールドの並びに食い違いがあると、エラーが発生します。実行前にsortコマンドでファイルの並び順を正した後で、joinコマンドを実行しましょう。

## pasteコマンド
複数のファイルを行ごとに結合して出力するコマンド。デフォルトではファイル間の区切り文字にタブを利用するが、『-d』オプションでそれ以外の区切り文字を指定できる。

なおファイルを複数指定する代わりに『-』を使うと、標準入力と結合することができるので、以下のようなこともできる。

```bash
cat 001.txt
# user1
# user2
# user3

cat 002.txt
# val001
# val002
# val003

#_______________
# 標準入力とファイルふたつを結合
  -dオプションで、最初の区切り文字は ":"
  次の区切り文字は "," に指定している
#--------------
seq 3 | paste -d :, - 001.txt 002.txt
# 1:user1,val001
# 2:user2,val002
# 3:user3,val003
```

## trコマンド

## splitコマンド

## uniqコマンド

## wcコマンド

## sedコマンド

## fmtコマンド

## expandコマンド

## unexpandコマンド

## prコマンド

